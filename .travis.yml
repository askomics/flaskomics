matrix:
  include:
    - language: python
      python:
        - 3.6
      services:
      - docker
      cache:
        - pip
      install:
        - make install-python MODE=dev
      before_script:
      - docker pull askomics/virtuoso:7.2.5.1
      - sudo docker run -d --name virtuoso -p 8891:8890 -p 1112:1111 -v $(pwd)/virtuoso-tmps.sh:/virtuoso/virtuoso.sh -e DBA_PASSWORD=dba -e SPARQL_UPDATE=true -e DEFAULT_GRAPH=http://localhost:8891/DAV -t askomics/virtuoso:7.2.5.1 /bin/sh -c "netstat -nr | grep '^0\.0\.0\.0' | grep -oE '((1?[0-9][0-9]?|2[0-4][0-9]|25[0-5])\.){3}(1?[0-9][0-9]?|2[0-4][0-9]|25[0-5])' | grep -v '^0\.0\.0\.0' | sed 's/$/ askomics-host/' >> /etc/hosts && /virtuoso/virtuoso.sh"
      - sleep 1m
      script:
        - docker logs virtuoso
      after_success:
        coveralls

    - language: node_js
      node_js:
        - 8
      install:
        - make install-js MODE=dev
      script:
        - make eslint MODE=dev TRAVIS=true
